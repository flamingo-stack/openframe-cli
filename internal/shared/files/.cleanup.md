<!-- source-hash: 1ba729d3e7f90810d0838b31d866f6a9 -->
A comprehensive file backup and cleanup manager for the OpenFrame CLI that handles temporary file creation, restoration, and cleanup operations with support for both memory-based and disk-based backups.

## Key Components

### Types
- **FileBackup**: Represents a single file backup operation with original path, backup location, and content storage options
- **FileCleanup**: Main cleanup manager that tracks multiple file backups and handles restoration logic

### Core Methods
- **BackupFile()**: Creates backups before file modification (memory or disk-based)
- **RestoreFiles()**: Restores all backed up files to original state
- **RegisterTempFile()**: Registers temporary files for deletion without backup
- **SetCleanupOnSuccessOnly()**: Controls when temporary files are cleaned up

### Utility Functions
- **AddCLIMarkerToFile()**: Adds generation markers and timestamps to CLI-created files
- **GetSafeFileName()**: Creates unique temporary filenames with timestamps

## Usage Example

```go
package main

import (
    "github.com/openframe/openframe/internal/files"
)

func main() {
    // Create cleanup manager
    cleanup := files.NewFileCleanup()
    
    // Set to only cleanup temporary files on success
    cleanup.SetCleanupOnSuccessOnly(true)
    
    // Backup existing file before modification
    err := cleanup.BackupFile("config.yaml", false) // disk backup
    if err != nil {
        panic(err)
    }
    
    // Register a new temporary file
    tempFile := files.GetSafeFileName("temp-config.yaml")
    cleanup.RegisterTempFile(tempFile)
    
    // Add CLI markers to generated content
    content := files.AddCLIMarkerToFile(tempFile, "# New config content")
    
    // On success, cleanup temporary files
    defer cleanup.RestoreFilesOnSuccess(true)
    
    // On error/interrupt, restore everything
    defer func() {
        if r := recover(); r != nil {
            cleanup.RestoreFiles(true)
        }
    }()
}
```