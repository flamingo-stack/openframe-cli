<!-- source-hash: e8b8c436e9d0ee37274cb56b31a7df95 -->
This file contains unit tests for the intercept service, which handles creating Telepresence intercepts for Kubernetes services during local development.

## Key Components

- **TestService_CreateIntercept**: Comprehensive test suite covering various intercept scenarios including basic intercepts, custom ports, environment files, global intercepts, headers, and error handling
- **TestService_GetRemotePortName**: Tests the logic for determining remote port names, either from custom configuration or defaulting to port numbers
- **TestIntercept_CommandConstruction**: Validates that Telepresence commands are constructed correctly with all available flags

## Usage Example

```go
// Run the test suite
func TestYourInterceptService(t *testing.T) {
    testutil.InitializeTestMode()
    mockExecutor := testutil.NewTestMockExecutor()
    service := NewService(mockExecutor, false)
    
    // Test basic intercept creation
    flags := &models.InterceptFlags{
        Port:      8080,
        Namespace: "default",
    }
    
    mockExecutor.SetResponse("telepresence intercept", &executor.CommandResult{ExitCode: 0})
    
    err := service.createIntercept(context.Background(), "my-service", flags)
    assert.NoError(t, err)
    
    // Verify command was executed correctly
    commands := mockExecutor.GetExecutedCommands()
    assert.Contains(t, commands[0], "telepresence intercept my-service")
}
```

The tests ensure proper command construction, error handling, and validation of various intercept configuration options including port mapping, headers, environment files, and global intercepts.