<!-- source-hash: 27a0c55c3e55eff214b752ae1de06198 -->
Test suite for the intercept service namespace functionality, covering namespace detection and switching operations using Telepresence.

## Key Components

- **TestService_GetCurrentNamespace**: Tests the `getCurrentNamespace()` method with various command execution scenarios including successful responses, empty namespaces, and command failures
- **TestService_SwitchNamespace**: Tests the `switchNamespace()` method covering successful switches, partial failures, and connection errors
- **TestTelepresenceStatus_JSONParsing**: Tests JSON parsing of Telepresence status responses with various data structures and edge cases
- **TelepresenceStatus**: Struct used for testing JSON unmarshaling of Telepresence status output

## Usage Example

```go
// Run namespace detection tests
func TestService_GetCurrentNamespace(t *testing.T) {
    testutil.InitializeTestMode()
    mockExecutor := testutil.NewTestMockExecutor()
    service := NewService(mockExecutor, false)

    // Mock successful namespace detection
    mockExecutor.SetResponse("bash", &executor.CommandResult{
        ExitCode: 0,
        Stdout:   "production",
    })

    namespace, err := service.getCurrentNamespace(context.Background())
    assert.NoError(t, err)
    assert.Equal(t, "production", namespace)
}

// Test namespace switching
func TestService_SwitchNamespace(t *testing.T) {
    // Setup mocks for quit and connect commands
    mockExecutor.SetResponse("telepresence quit", &executor.CommandResult{ExitCode: 0})
    mockExecutor.SetResponse("telepresence connect", &executor.CommandResult{ExitCode: 0})

    err := service.switchNamespace(context.Background(), "default", "production")
    assert.NoError(t, err)
}
```