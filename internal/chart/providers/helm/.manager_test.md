<!-- source-hash: 8086533d2c49b59f199ffbb62baf496a -->
This file provides comprehensive unit tests for the Helm manager functionality, including a mock executor implementation for isolated testing.

## Key Components

- **MockExecutor**: Test double that implements `CommandExecutor` interface, allowing controlled simulation of command execution with predefined results and errors
- **Test Functions**:
  - `TestHelmManager_IsHelmInstalled`: Verifies Helm availability detection
  - `TestHelmManager_IsChartInstalled`: Tests chart installation status checking
  - `TestHelmManager_InstallArgoCD`: Comprehensive tests for ArgoCD installation including dry-run mode
  - `TestHelmManager_GetChartStatus`: Tests chart status retrieval functionality

## Usage Example

```go
// Create a mock executor for testing
mockExec := NewMockExecutor()

// Set up expected command results
mockExec.SetResult("helm version --short", &executor.CommandResult{
    ExitCode: 0,
    Stdout:   "v3.12.0+g4f11b4a",
})

// Set up command failures
mockExec.SetError("helm repo add", errors.New("network error"))

// Create manager with mock executor
manager := NewHelmManager(mockExec)

// Test the functionality
err := manager.IsHelmInstalled(context.Background())
assert.NoError(t, err)

// Verify commands were executed
commands := mockExec.GetCommands()
assert.Equal(t, "helm", commands[0][0])
```

The test suite covers both success and failure scenarios, validates command construction, and ensures proper error handling across all Helm operations.