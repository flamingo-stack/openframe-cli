<!-- source-hash: e0be7fbde34a7a6be9a8be9b5b555068 -->
This file contains comprehensive unit tests for the `Installer` service, focusing on chart installation workflows including ArgoCD and app-of-apps components. It uses mock implementations to test various installation scenarios, error handling, and retry mechanisms.

## Key Components

- **MockArgoCDService**: Mock implementation of the ArgoCD service interface with methods for Install, IsInstalled, GetStatus, and WaitForApplications
- **MockAppOfAppsService**: Mock implementation of the app-of-apps service interface with Install, IsInstalled, and GetStatus methods
- **TestInstaller_InstallCharts**: Main test function covering successful installations, various failure scenarios, and error handling
- **TestInstaller_InstallCharts_RecoverableError**: Tests recoverable error handling with retry mechanisms
- **TestInstaller_InstallCharts_NoWaitWithoutAppOfApps**: Verifies conditional behavior when app-of-apps is not configured
- **TestInstaller_InstallCharts_ErrorTypes**: Tests proper error wrapping and categorization

## Usage Example

```go
// Creating and using mocks in tests
mockArgoCD := new(MockArgoCDService)
mockAppOfApps := new(MockAppOfAppsService)

// Setup mock expectations
mockArgoCD.On("Install", mock.Anything, mock.Anything).Return(nil)
mockAppOfApps.On("Install", mock.Anything, mock.Anything).Return(nil)

// Create installer with mocks
installer := &Installer{
    argoCDService:    mockArgoCD,
    appOfAppsService: mockAppOfApps,
}

// Test the installation
err := installer.InstallCharts(config.ChartInstallConfig{
    ClusterName: "test-cluster",
    AppOfApps: &models.AppOfAppsConfig{
        GitHubRepo: "owner/repo",
    },
})

// Verify mock expectations were met
mockArgoCD.AssertExpectations(t)
```