<!-- source-hash: e0be7fbde34a7a6be9a8be9b5b555068 -->
This file contains comprehensive unit tests for the `Installer` service, focusing on testing chart installation workflows with mock dependencies.

## Key Components

- **MockArgoCDService**: Mock implementation of the ArgoCD service interface with methods for installation, status checking, and waiting for applications
- **MockAppOfAppsService**: Mock implementation of the App-of-Apps service interface for managing application collections
- **Test Functions**:
  - `TestInstaller_InstallCharts`: Main test suite covering various installation scenarios
  - `TestInstaller_InstallCharts_RecoverableError`: Tests error recovery mechanisms
  - `TestInstaller_InstallCharts_NoWaitWithoutAppOfApps`: Verifies conditional waiting logic
  - `TestInstaller_InstallCharts_ErrorTypes`: Tests error wrapping and categorization

## Usage Example

```go
// Create mock services for testing
mockArgoCD := new(MockArgoCDService)
mockAppOfApps := new(MockAppOfAppsService)

// Set up mock expectations
mockArgoCD.On("Install", mock.Anything, mock.Anything).Return(nil)
mockAppOfApps.On("Install", mock.Anything, mock.Anything).Return(nil)

// Create installer with mocks
installer := &Installer{
    argoCDService:    mockArgoCD,
    appOfAppsService: mockAppOfApps,
}

// Test installation
config := config.ChartInstallConfig{
    ClusterName: "test-cluster",
    AppOfApps: &models.AppOfAppsConfig{
        GitHubRepo: "owner/repo",
    },
}
err := installer.InstallCharts(config)
```

The tests verify successful installations, error handling, error type wrapping, and conditional behavior based on app-of-apps configuration.