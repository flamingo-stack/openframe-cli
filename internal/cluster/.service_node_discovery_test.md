<!-- source-hash: 65557cee0a7eedb13cd2596556ffe292 -->
Test file for validating K3d cluster node discovery and filtering functionality. Contains comprehensive test coverage for identifying and working with K3d cluster nodes while excluding infrastructure containers.

## Key Components

- **TestClusterService_getK3dClusterNodes**: Tests the main node discovery method with various scenarios including empty clusters, failed commands, and successful node enumeration
- **TestClusterService_filterK3dNodes**: Validates the filtering logic that extracts valid K3d nodes from Docker output
- **TestClusterService_isK3dWorkerNode**: Tests node classification to distinguish between worker nodes (server/agent) and infrastructure containers (serverlb/tools)
- **TestClusterService_cleanupDockerResources_Integration**: Integration test verifying the complete cleanup workflow

## Usage Example

```go
// Run specific test function
go test -run TestClusterService_getK3dClusterNodes

// Run all tests in the file
go test ./service_node_discovery_test.go

// Example test case structure used in the file
tests := []struct {
    name         string
    clusterName  string
    dockerOutput string
    expected     []string
    expectError  bool
}{
    {
        name:        "successful node discovery",
        clusterName: "test-cluster",
        dockerOutput: "k3d-test-cluster-server-0\nk3d-test-cluster-agent-0",
        expected:    []string{"k3d-test-cluster-server-0", "k3d-test-cluster-agent-0"},
        expectError: false,
    },
}
```