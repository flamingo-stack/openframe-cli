<!-- source-hash: 1e2ef8c90a0bea8e5648538cb1c325fa -->
This file implements a K3D cluster manager for creating and managing lightweight Kubernetes clusters using K3D (K3s in Docker). It provides comprehensive cluster lifecycle operations with intelligent port allocation and robust error handling.

## Key Components

- **K3dManager**: Main struct implementing cluster management operations
- **ClusterManager Interface**: Defines contract for cluster detection and listing operations
- **Configuration Constants**: Default values for K3s images, timeouts, and port ranges
- **Port Management**: Dynamic port allocation system to avoid conflicts between clusters
- **Config File Generation**: Creates temporary K3D configuration files for cluster creation

### Core Methods

- `NewK3dManager()` / `NewK3dManagerWithTimeout()`: Factory functions for manager creation
- `CreateCluster()`: Creates new K3D clusters using configuration files
- `DeleteCluster()` / `StartCluster()`: Cluster lifecycle management
- `ListClusters()` / `GetClusterStatus()`: Cluster discovery and status reporting
- `GetKubeconfig()`: Retrieves kubeconfig for cluster access
- `DetectClusterType()`: Determines if a cluster is managed by K3D

### Port Allocation Features

- **Intelligent Port Selection**: Avoids conflicts with existing K3D clusters
- **Dynamic Port Range**: Falls back to dynamic ports (20000-50000) when defaults are busy
- **Used Port Detection**: Scans existing clusters to prevent port collisions

## Usage Example

```go
// Create a new K3D manager
executor := executor.NewCommandExecutor()
manager := NewK3dManager(executor, true) // verbose mode enabled

// Create a cluster configuration
config := models.ClusterConfig{
    Name:       "my-cluster",
    Type:       models.ClusterTypeK3d,
    NodeCount:  3,
    K8sVersion: "v1.31.5-k3s1",
}

// Create the cluster
ctx := context.Background()
if err := manager.CreateCluster(ctx, config); err != nil {
    log.Fatalf("Failed to create cluster: %v", err)
}

// List all K3D clusters
clusters, err := manager.ListClusters(ctx)
if err != nil {
    log.Fatalf("Failed to list clusters: %v", err)
}

// Get kubeconfig for cluster access
kubeconfig, err := manager.GetKubeconfig(ctx, "my-cluster", models.ClusterTypeK3d)
if err != nil {
    log.Fatalf("Failed to get kubeconfig: %v", err)
}
```