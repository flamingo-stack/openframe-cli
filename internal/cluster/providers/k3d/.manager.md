<!-- source-hash: 747754b56df228efc1bb630368551b82 -->
Manages K3D cluster lifecycle operations including creation, deletion, and configuration for the OpenFrame CLI platform.

## Key Components

### Types
- **K3dManager** - Main struct managing K3D cluster operations with command execution and timeout configuration
- **ClusterManager** - Interface defining cluster management operations (DetectClusterType, ListClusters, ListAllClusters)

### Constructor Functions
- **NewK3dManager()** - Creates manager with default 300s timeout
- **NewK3dManagerWithTimeout()** - Creates manager with custom timeout

### Core Methods
- **CreateCluster()** - Creates new K3D cluster with comprehensive Windows/WSL support
- **DeleteCluster()** - Removes cluster with fallback Docker cleanup for failed deletions
- **StartCluster()** - Starts existing cluster
- **GetRestConfig()** - Retrieves Kubernetes rest.Config for cluster access
- **ListClusters()** - Returns all K3D clusters as JSON

### Platform-Specific Features
- **Windows/WSL Integration** - Handles path conversion, internal IP detection, and kubeconfig rewriting
- **Docker Cleanup** - Force removal of containers when standard deletion fails
- **Permission Management** - Fixes kubeconfig ownership issues in containerized environments

## Usage Example

```go
// Create manager with verbose logging
executor := executor.NewRealExecutor()
manager := NewK3dManager(executor, true)

// Create cluster configuration
config := models.ClusterConfig{
    Name: "openframe-dev",
    Type: models.ClusterTypeK3d,
    Ports: map[string]string{
        "api": "6550",
        "http": "8080", 
        "https": "8443",
    },
}

// Create cluster and get Kubernetes config
restConfig, err := manager.CreateCluster(ctx, config)
if err != nil {
    return fmt.Errorf("cluster creation failed: %w", err)
}

// Use restConfig to interact with cluster
clientset, err := kubernetes.NewForConfig(restConfig)
```

The manager includes robust error handling, cross-platform compatibility, and automatic fallback mechanisms for challenging environments like Windows WSL.