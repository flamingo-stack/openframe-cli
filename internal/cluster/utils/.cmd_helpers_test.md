<!-- source-hash: 52701efac70b86314eadccb8ea700689 -->
Test file for command helper functions that provides comprehensive coverage of global flag management, command service creation, and testing utilities.

## Key Components

- **Flag Lifecycle Tests**: Tests for `InitGlobalFlags()`, `GetGlobalFlags()`, and reset functions
- **Command Service Tests**: Validates `GetCommandService()` with various executor configurations
- **Command Wrapping Tests**: Tests `WrapCommandWithCommonSetup()` for error handling and execution flow
- **Testing Support Tests**: Covers `SetTestExecutor()`, `ResetGlobalFlags()`, and integration test helpers
- **Edge Case Coverage**: Handles nil states, concurrency scenarios, and partial flag initialization

## Usage Example

```go
// Initialize and test global flags
InitGlobalFlags()
flags := GetGlobalFlags()
assert.NotNil(t, flags)

// Test command wrapping with error handling
wrappedFunc := WrapCommandWithCommonSetup(func(cmd *cobra.Command, args []string) error {
    return nil
})
err := wrappedFunc(&cobra.Command{}, []string{})
assert.NoError(t, err)

// Set up test environment
mockExecutor := testutil.NewTestMockExecutor()
SetTestExecutor(mockExecutor)
service := GetCommandService()
assert.NotNil(t, service)
```

The tests ensure robust flag management, proper error handling, thread safety, and comprehensive coverage of both normal operations and edge cases including nil pointer scenarios and concurrent access patterns.